<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="MongoDB Authentication"><meta name="keywords" content=""><meta name="author" content="Kiyoshi"><meta name="copyright" content="Kiyoshi"><title>MongoDB Authentication | Kiyoshi's Blog</title><link rel="shortcut icon" href="https://cdn.jsdelivr.net/npm/kys"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="manifest" href="/manifest.json"><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#A4D8Fa"><meta name="msapplication-TileColor" content="#A4D8Fa"><link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/npm/kys/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/npm/kys/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/npm/kys/favicon/favicon-16x16.png"><link rel="mask-icon" href="https://cdn.jsdelivr.net/npm/kys/favicon/safari-pinned-tab.svg" color="#A4D8Fa"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-137245797-1', 'auto');
ga('send', 'pageview');</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.4.0'
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">1.</span> <span class="toc-text"> 问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">2.</span> <span class="toc-text"> 解决方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text"> 实现过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8-mongodb"><span class="toc-number">3.1.</span> <span class="toc-text"> 启动 MongoDB</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E5%88%B0-mongodb"><span class="toc-number">3.2.</span> <span class="toc-text"> 连接到 MongoDB</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%91%98"><span class="toc-number">3.3.</span> <span class="toc-text"> 创建用户管理员</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%90%AF-mongodb-%E5%B9%B6%E5%BC%80%E5%90%AF-access-control"><span class="toc-number">3.4.</span> <span class="toc-text"> 重启 MongoDB 并开启 Access Control</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E9%9C%80%E6%B1%82%E5%88%9B%E5%BB%BA%E9%9C%80%E8%A6%81%E7%9A%84%E7%94%A8%E6%88%B7"><span class="toc-number">3.5.</span> <span class="toc-text"> 根据需求创建需要的用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B0%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="toc-number">3.6.</span> <span class="toc-text"> 使用新用户登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E5%BA%93%E4%B8%AD%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">3.7.</span> <span class="toc-text"> 在库中插入数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text"> 总结</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://cdn.jsdelivr.net/npm/kys/avatar/128x128.png"></div><div class="author-info__name text-center">Kiyoshi</div><div class="author-info__description text-center">A guy who tells his own story.</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">15</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">5</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Kiyoshi 的朋友们</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://sheey.moe">Sheey</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/npm/kys/img/banner.png)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Kiyoshi's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" target="_blank" rel="noopener" href="https://iot.k1yoshi.com">IoT</a><a class="site-page" href="/guestbook">留言板</a><a class="site-page" target="_blank" rel="noopener" href="https://k1yoshi.com">关于</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">MongoDB Authentication</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-11</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">1.4k</span><span class="post-meta__separator">|</span><span>阅读时长: 5 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>最近因为博客抽风了一下下，所以重置了一下 VPS，顺便从有点蠢蠢的 Ubuntu 换成了纯洁的也蠢蠢的 Debian。重置之前忘记了一件很重要的事：<a target="_blank" rel="noopener" href="https://iot.k1yoshi.com">Kiyoshi IoT</a> 的数据是来自这一台服务器的 MongoDB。虽然数据不是那么重要，但是这个小页面还是要的！毕竟会让我觉得自己还是能做点小项目的（虽然屁用都没有吧！）。</p>
<p>在以前这个 MongoDB Server 都是没开 Authentication 的，只要连接就可以上 —— 因为 Kiyoshi 心大而且没有重要数据！但是今天有点想折腾一下，顺便读一点点 MongoDB 的文档啦！</p>
<span id="more"></span>
<h2 id="问题"><a class="markdownIt-Anchor" href="#问题"></a> 问题</h2>
<p>一个毫无保护的 MongoDB 是不得行的！所以要开启 MongoDB 的 Access Control！</p>
<h2 id="解决方案"><a class="markdownIt-Anchor" href="#解决方案"></a> 解决方案</h2>
<p>在 MongoDB 官方文档中的 <a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/tutorial/enable-authentication/">Enable Access Control</a> 部分中有提到：</p>
<blockquote>
<p>The following procedure first adds a user administrator to a MongoDB instance running without access control and then enables access control.</p>
</blockquote>
<p>所以第一步是创建用户啦。</p>
<h2 id="实现过程"><a class="markdownIt-Anchor" href="#实现过程"></a> 实现过程</h2>
<p>该过程是完全照着官方文档走的！<strong>原味的才是最棒的嗷！</strong></p>
<h3 id="启动-mongodb"><a class="markdownIt-Anchor" href="#启动-mongodb"></a> 启动 MongoDB</h3>
<p>创建用户之前，要先启动 MongoDB Server！</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># terminal 中启动</span></span><br><span class="line">mongod --port 27017 --dbpath /path/to/db</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以 service 启动</span></span><br><span class="line">service mongod start</span><br></pre></td></tr></table></figure>
<p>因为我不喜欢开太多框框，所以这里是直接 service 启动！</p>
<h3 id="连接到-mongodb"><a class="markdownIt-Anchor" href="#连接到-mongodb"></a> 连接到 MongoDB</h3>
<p>接着在本地以 mongo shell 的形式连接到 MongoDB：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 若端口为默认的 27017 则可以不用指定 --port 参数</span></span><br><span class="line">mongo --port 27017</span><br></pre></td></tr></table></figure>
<h3 id="创建用户管理员"><a class="markdownIt-Anchor" href="#创建用户管理员"></a> 创建用户管理员</h3>
<p>在 mongo shell 中，向 <code>admin</code> 创建一个身份为 <code>userAdminAnyDatabase</code> 的用户。一个用户可以有多重身份，所以在创建的时候也可以将其他的身份一并赋予新用户。<s>根据官方文档</s>为了以后的方便，可以创建一个身份为 <code>userAdminAnyDatabase</code> 和 <code>readWriteAnyDatabase</code> 的用户。</p>
<p>在 MongoDB 中不同的身份拥有不同的权限。</p>
<p><strong>注：MongoDB 自带身份说明：<a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/reference/built-in-roles/">MongoDB Built-In Roles</a></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">use admin <span class="comment">// 切换到 admin database</span></span><br><span class="line">db.createUser(</span><br><span class="line">  &#123;</span><br><span class="line">    user: <span class="string">&quot;myUserAdmin&quot;</span>, <span class="comment">// 用户名</span></span><br><span class="line">    pwd: passwordPrompt(), <span class="comment">// 通过标准输入录入密码；当然也可以直接在这里以明文的方式进行输入；这是 MongoDB 4.2 的新特性，低于 4.2 就别用啦</span></span><br><span class="line">    roles: [ &#123; <span class="attr">role</span>: <span class="string">&quot;userAdminAnyDatabase&quot;</span>, <span class="attr">db</span>: <span class="string">&quot;admin&quot;</span> &#125;, <span class="string">&quot;readWriteAnyDatabase&quot;</span> ] <span class="comment">// 身份信息</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>在官方文档中有提到：</p>
<blockquote>
<p>The database where you create the user (in this example, admin) is the user’s authentication database. Although the user would authenticate to this database, the user can have roles in other databases; i.e. the user’s authentication database does not limit the user’s privileges.</p>
</blockquote>
<p>也就是说是否在 <code>admin</code> 中创建这个用户并不会影响该用户的权限；它也可以访问其他的数据库。但是 Kiyoshi 感觉在 <code>admin</code> 中创建所有的管理员账户应该是惯例。</p>
<h3 id="重启-mongodb-并开启-access-control"><a class="markdownIt-Anchor" href="#重启-mongodb-并开启-access-control"></a> 重启 MongoDB 并开启 Access Control</h3>
<ol>
<li>
<p>为了让用户生效，需要重启 MongoDB 啦。</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.adminCommand( &#123; <span class="attr">shutdown</span>: <span class="number">1</span> &#125; )</span><br></pre></td></tr></table></figure>
<p>这样 MongoDB 就会暂时停止工作。</p>
</li>
<li>
<p>退出 mongo shell</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>重新启动开启了 Access Control 的 MongoDB</p>
<p>若要从终端直接开启 MongoDB：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --auth 参数开启了 Access Control</span></span><br><span class="line">mongod --auth --port 27017 --dbpath /path/to/db</span><br></pre></td></tr></table></figure>
<p>如果是通过 <code>service</code> 启动 MongoDB，或是想要将 Access Control 作为启动 MongoDB 的默认选项，需要修改 MongoDB 的配置文件。默认路径通常为 <code>mongod.conf</code>。</p>
<p>在配置文件中找到 <code>security</code> 项，取消注释，添加配置：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># MongoDB config convention 应该为两个空格</span><br><span class="line">security:</span><br><span class="line">  authorization: enable</span><br></pre></td></tr></table></figure>
<p><strong>注：MongoDB 配置文件说明：<a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/reference/configuration-options/">Configuration File Options</a></strong></p>
</li>
<li>
<p>以管理员身份连接到 MongoDB</p>
<p>现在 MongoDB 已经不能直接访问了，如果直接访问某一个数据库会被拒绝访问。可以尝试使用管理员账户登录啦：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo --port 27017  --authenticationDatabase <span class="string">&quot;admin&quot;</span> -u <span class="string">&quot;myUserAdmin&quot;</span> -p</span><br></pre></td></tr></table></figure>
<p>在 mongo shell 的提示下输入密码就可以登录啦！</p>
<p>当然也有剑走偏锋的方式进行登录：在连接上 MongoDB 后再进行认证。</p>
<p>首先连接到数据库：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo --port 27017</span><br></pre></td></tr></table></figure>
<p>接着切换到 <code>admin</code> 并进行用户认证：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use admin</span><br><span class="line">db.auth(<span class="string">&quot;myUserAdmin&quot;</span>, passwordPrompt()) <span class="comment">// 和创建用户一样，也可以在这里直接输入明文密码</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="根据需求创建需要的用户"><a class="markdownIt-Anchor" href="#根据需求创建需要的用户"></a> 根据需求创建需要的用户</h3>
<p>只要使用了用户管理员的账号认证后，就可以使用 <code>db.createUser()</code> 这个方法来继续创建额外的用户啦。用户身份既可以是内置身份，也可以使用自己定义的身份：<a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/core/security-user-defined-roles/">User-Defined Roles</a>。</p>
<p><s>直接照搬了官方的例子</s></p>
<p>这里的代码在 <code>test</code> 库中创建了一个叫 <code>myTester</code>，拥有 <code>test</code> 库读写身份 <code>readWrite</code> 和 <code>reporting</code> 库只读身份 <code>read</code> 的用户。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">use test</span><br><span class="line">db.createUser(</span><br><span class="line">  &#123;</span><br><span class="line">    user: <span class="string">&quot;myTester&quot;</span>,</span><br><span class="line">    pwd:  passwordPrompt(),</span><br><span class="line">    roles: [ &#123; <span class="attr">role</span>: <span class="string">&quot;readWrite&quot;</span>, <span class="attr">db</span>: <span class="string">&quot;test&quot;</span> &#125;,</span><br><span class="line">             &#123; <span class="attr">role</span>: <span class="string">&quot;read&quot;</span>, <span class="attr">db</span>: <span class="string">&quot;reporting&quot;</span> &#125; ]</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>接着可以从 mongo shell 中断开连接并尝试用新的用户登录啦。</p>
<h3 id="使用新用户登录"><a class="markdownIt-Anchor" href="#使用新用户登录"></a> 使用新用户登录</h3>
<p>按照之前登录的方式，以新用户的账户通过 mongo shell 登录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo --port 27017 -u <span class="string">&quot;myTester&quot;</span> --authenticationDatabase <span class="string">&quot;test&quot;</span> -p</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo --port 27017</span><br></pre></td></tr></table></figure>
<p>接着切换到 <code>test</code> 并进行用户认证：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use test</span><br><span class="line">db.auth(<span class="string">&quot;myTester&quot;</span>, passwordPrompt())</span><br></pre></td></tr></table></figure>
<h3 id="在库中插入数据"><a class="markdownIt-Anchor" href="#在库中插入数据"></a> 在库中插入数据</h3>
<p>登入库里之后，以 <code>myTester</code> 的身份在 <code>test</code> 库的 <code>foo</code> 集合中插入数据：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use test</span><br><span class="line">db.foo.insert( &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">1</span> &#125; )</span><br></pre></td></tr></table></figure>
<p>如果你有可视化工具或是直接进行查询的话，就已经可以看到这一条数据的存在啦！</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查询集合中第一条数据</span></span><br><span class="line">db.foo.find()</span><br></pre></td></tr></table></figure>
<p>至此，MongoDB 简单的用户认证就做好啦！</p>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2>
<p>在以前我的 MongoDB 一直是开放的状况，谁都能访问；随便扫扫我服务器的端口就知道我开了 MongoDB <s>虽然没人在意</s>，总觉得怪怪的！现在有了一点点点点的保护，感觉有点舒服！就当学习啦。</p>
<p>End - of - File</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Kiyoshi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.k1yoshi.com/article/mongodb-auth/">https://blog.k1yoshi.com/article/mongodb-auth/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.k1yoshi.com">Kiyoshi's Blog</a>！</span></div></div><nav id="pagination"><div class="prev-post pull-left"><a href="/article/fall-2019-general-plan/"><i class="fa fa-chevron-left">  </i><span>2019 秋季学期计划</span></a></div><div class="next-post pull-right"><a href="/article/em-phys-exam-1/"><span>EM Physics Exam 1</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '986b9494dddf947a6dd3',
  clientSecret: '18beecdc8a190f83e826f6e6fda5d73b2be50b15',
  repo: 'blog.k1yoshi.com',
  owner: 'Kiyo5hi',
  admin: 'Kiyo5hi',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer class="footer-bg" style="background-image: url(https://cdn.jsdelivr.net/npm/kys/img/banner.png)"><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2021 By Kiyoshi</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>